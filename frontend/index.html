<!-- frontend/index.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Supplier - Add Item</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
</head>
<body>
  <h1>Supplier Item Upload</h1>
  <form id="itemForm">
    <label>Supplier name: <input name="supplier" required /></label><br/>
    <label>Item code: <input name="item_code" required/></label><br/>
    <label>Item name: <input name="item_name" required/></label><br/>
    <label>Unit price: <input name="unit_price" type="number" step="0.01" required/></label><br/>
    <label>Quantity: <input name="quantity" type="number" required/></label><br/>
    <label>Category: <input name="category"/></label><br/>
    <button type="submit">Submit</button>
  </form>

  <div id="status"></div>

<script>
const form = document.getElementById('itemForm');
const status = document.getElementById('status');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  try {
    status.textContent = 'Sending...';
    const resp = await fetch('/api/generate_csv', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify(data)
    });
    const j = await resp.json();
    if (resp.ok) status.textContent = 'OK â€” ' + (j.message || 'CSV created');
    else status.textContent = 'Error: ' + (j.error || resp.statusText);
  } catch (err) {
    status.textContent = 'Network error: ' + err.message;
  }
});
</script>
</body>
</html>

